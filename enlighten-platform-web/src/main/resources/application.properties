spring.application.name=enlighten-platform-web

# 数据库连接配置
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://192.168.3.10:3306/enlighten_platform?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&createDatabaseIfNotExist=true
spring.datasource.username=ccc
spring.datasource.password=143333

# 避免 Hikari 在启动时因连接失败而立即终止，允许初始化逻辑先行创建数据库
spring.datasource.hikari.initializationFailTimeout=0

# MyBatis-Plus配置
mybatis-plus.configuration.map-underscore-to-camel-case=true
mybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl
mybatis-plus.global-config.db-config.id-type=auto
mybatis-plus.global-config.db-config.logic-delete-field=deleted
mybatis-plus.global-config.db-config.logic-delete-value=1
mybatis-plus.global-config.db-config.logic-not-delete-value=0

# ========== Flyway 配置 ==========
# 默认启用 Flyway；如需禁用可设置为 false
spring.flyway.enabled=true
# 迁移脚本位置：classpath:db/migration 下的 V__ 格式文件
spring.flyway.locations=classpath:db/migration
# 允许在空库上执行，也允许第一次创建 baseline 以避免与已有库冲突
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true
spring.flyway.out-of-order=false

# ========== 应用内数据库初始化开关 ==========
# 为避免与 Flyway 冲突，默认关闭内置的 DatabaseInitializer（仅在明确需要建库时开启）
app.database-initializer.enabled=false

# JWT 配置
app.jwt.secret=ChangeThisSecretToYourOwnAtLeast32BytesLength
app.jwt.expire-seconds=604800

# 上游 AI 帮填接口地址（SSE）
app.upstream.fill-in-url=http://frp5.mmszxc.xin:57599/fill_in
# 上游 生成科普内容 接口地址（SSE）
app.upstream.science-generator-url=http://frp5.mmszxc.xin:57599/science-generator_o
app.upstream.convert2media-url=http://frp5.mmszxc.xin:57599/convert2media
app.upstream.convert2gzh-re-url=http://frp5.mmszxc.xin:57599/convert2gzh_re
app.upstream.convert2gzh-url=http://frp5.mmszxc.xin:57599/convert2gzh
app.upstream.science-regenerator-url=http://frp5.mmszxc.xin:57599/science-regenerator_o

# 视频生成相关接口配置
app.upstream.dh-generate-url=http://frp5.mmszxc.xin:57599/dh/generate
app.upstream.dh-status-url=http://frp5.mmszxc.xin:57599/dh/status
app.upstream.subtitle-burn-url=http://localhost:8081/api/subtitles/burn-url-srt/async
app.upstream.subtitle-status-url=http://localhost:8081/api/subtitles/task
app.upstream.video-download-url=http://frp5.mmszxc.xin:57599
app.upstream.subtitle-token=sk-zhongjia-subtitle-fusion-20250817
app.upstream.subtitle-download-url=http://localhost:8081/api/subtitles/download

# ========== RocketMQ 配置 ==========
# RocketMQ NameServer 地址
rocketmq.name-server=192.168.3.10:9876
# 生产者组
rocketmq.producer.group=video_generation_producer_group
# 生产者发送消息超时时间
rocketmq.producer.send-message-timeout=3000
# 生产者重试次数
rocketmq.producer.retry-times-when-send-failed=2

# ===== 日志配置 =====
logging.pattern.level=%5p [traceId=%X{traceId}]
logging.level.root=INFO
logging.level.com.zhongjia=INFO

